import{r as p,u as Y,j as e,M as ee,G as N,N as g,m as T,d as te,A as O}from"./index-D6kfz2qZ.js";const ie=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),se=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,l,h)=>h?h.toUpperCase():l.toLowerCase()),W=i=>{const n=se(i);return n.charAt(0).toUpperCase()+n.slice(1)},K=(...i)=>i.filter((n,l,h)=>!!n&&n.trim()!==""&&h.indexOf(n)===l).join(" ").trim(),ne=i=>{for(const n in i)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var re={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ae=p.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:h,className:d="",children:o,iconNode:b,...w},k)=>p.createElement("svg",{ref:k,...re,width:n,height:n,stroke:i,strokeWidth:h?Number(l)*24/Number(n):l,className:K("lucide",d),...!o&&!ne(w)&&{"aria-hidden":"true"},...w},[...b.map(([c,y])=>p.createElement(c,y)),...Array.isArray(o)?o:[o]]));const j=(i,n)=>{const l=p.forwardRef(({className:h,...d},o)=>p.createElement(ae,{ref:o,iconNode:n,className:K(`lucide-${ie(W(i))}`,`lucide-${i}`,h),...d}));return l.displayName=W(i),l};const oe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],le=j("activity",oe);const ce=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],P=j("check",ce);const de=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],pe=j("crosshair",de);const xe=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],H=j("gavel",xe);const he=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ue=j("radio",he);const ge=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],$=j("shield-alert",ge);const ye=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_=j("shield-check",ye);const me=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],V=j("user-plus",me);const fe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ve=j("users",fe);const je=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],be=j("x",je),we=({isOpen:i,onClose:n,user:l,initialGroupId:h})=>{const{myGroups:d}=Y(),[o,b]=p.useState(()=>{const s=new Set;return h&&s.add(h),s}),[w,k]=p.useState(!1),[c,y]=p.useState(null),[z,R]=p.useState([]),E=s=>{const f=new Set(o);f.has(s)?f.delete(s):f.add(s),b(f)},U=()=>{o.size===d.length?b(new Set):b(new Set(d.map(s=>s.id)))},M=async()=>{if(!l||o.size===0||!confirm(`Are you sure you want to BAN ${l.displayName} from ${o.size} groups? This cannot be easily undone.`))return;if(!window.electron.banUser){alert(`CRITICAL ERROR: 'banUser' function is missing.

Please RESTART the application to apply the latest updates.`);return}k(!0),R([]);const s=d.filter(m=>o.has(m.id));y({current:0,total:s.length,failed:0});let f=0,a=0;const S=[];for(const m of s){try{const v=await window.electron.banUser(m.id,l.id);S.push({groupId:m.id,groupName:m.name,success:v.success,error:v.error}),v.success||a++}catch(v){const L=v instanceof Error?v.message:"Unknown error";S.push({groupId:m.id,groupName:m.name,success:!1,error:L}),a++}f++,y({current:f,total:s.length,failed:a}),R([...S]),await new Promise(v=>setTimeout(v,200))}k(!1)};return l?e.jsx(ee,{isOpen:i,onClose:w?()=>{}:n,title:`Ban User: ${l.displayName}`,children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",minWidth:"400px",maxHeight:"70vh"},children:c?e.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem",display:"flex",flexDirection:"column",gap:"5px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:c.current<c.total?"Banning User...":"Ban Operation Complete"}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--color-text-dim)"},children:[c.current," / ",c.total," Processed • ",c.failed," Failed"]})]}),e.jsx("div",{style:{height:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",marginBottom:"1.5rem",overflow:"hidden"},children:e.jsx(T.div,{initial:{width:0},animate:{width:`${c.current/c.total*100}%`},style:{height:"100%",background:"var(--color-danger)"}})}),e.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",textAlign:"left",display:"flex",flexDirection:"column",gap:"6px"},children:z.map(s=>e.jsxs("div",{style:{fontSize:"0.8rem",display:"flex",justifyContent:"space-between",padding:"6px",background:"rgba(0,0,0,0.2)",borderRadius:"4px"},children:[e.jsx("span",{children:s.groupName}),s.success?e.jsxs("span",{style:{color:"var(--color-success)",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(P,{size:12})," Banned"]}):e.jsxs("span",{style:{color:"#fca5a5",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(be,{size:12})," ",s.error]})]},s.groupId))}),c.current===c.total&&e.jsx("div",{style:{marginTop:"1.5rem"},children:e.jsx(g,{onClick:n,style:{width:"100%"},children:"Close"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(N,{style:{padding:"1rem",background:"rgba(255,50,50,0.1)",border:"1px solid rgba(255,50,50,0.3)",display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx($,{size:24,color:"#fca5a5"}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#fca5a5"},children:[e.jsx("b",{children:"Warning:"})," You are about to ban ",e.jsx("b",{children:l.displayName}),". Select the groups to apply this ban to."]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"-5px"},children:[e.jsxs("h4",{style:{margin:0,color:"var(--color-text-dim)"},children:["Select Groups (",o.size,")"]}),e.jsx("button",{onClick:U,style:{background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontSize:"0.8rem",fontWeight:"bold"},children:o.size===d.length?"Deselect All":"Select All"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",overflowY:"auto",paddingRight:"5px",maxHeight:"300px"},children:d.map(s=>e.jsxs("div",{onClick:()=>E(s.id),style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px",background:o.has(s.id)?"rgba(var(--primary-hue), 100%, 50%, 0.15)":"rgba(255,255,255,0.03)",border:o.has(s.id)?"1px solid var(--color-primary)":"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},children:[e.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"4px",border:o.has(s.id)?"none":"2px solid rgba(255,255,255,0.3)",background:o.has(s.id)?"var(--color-primary)":"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:o.has(s.id)&&e.jsx(P,{size:12,color:"black",strokeWidth:4})}),e.jsx("span",{style:{fontSize:"0.9rem",fontWeight:o.has(s.id)?600:400},children:s.name}),s.shortCode&&e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-text-dim)",marginLeft:"auto"},children:s.shortCode})]},s.id))}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"1rem"},children:[e.jsx(g,{variant:"secondary",onClick:n,style:{flex:1},children:"Cancel"}),e.jsxs(g,{variant:"danger",onClick:M,disabled:o.size===0,style:{flex:1,gap:"8px"},children:[e.jsx(H,{size:18}),"BAN FROM ",o.size," GROUPS"]})]})]})})}):null},F=({entity:i,onInvite:n,onKick:l,onBan:h,readOnly:d})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"8px",marginBottom:"8px",transition:"background 0.2s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:!d&&i.isGroupMember?"rgba(var(--primary-hue), 100%, 50%, 0.2)":"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:!d&&i.isGroupMember?"var(--color-primary)":"var(--color-text-dim)",overflow:"hidden"},children:i.avatarUrl?e.jsx("img",{src:i.avatarUrl,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(ve,{size:18})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"white"},children:i.displayName}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-dim)",display:"flex",gap:"6px",alignItems:"center"},children:d?e.jsx("span",{children:"Detected User"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:i.isGroupMember?"var(--color-primary)":"#fca5a5",fontWeight:"bold"},children:i.isGroupMember?"MEMBER":"NON-MEMBER"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:i.rank})]})})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[!d&&!i.isGroupMember&&e.jsx(g,{size:"sm",variant:"secondary",style:{padding:"4px 8px",fontSize:"0.75rem"},onClick:()=>n(i.id,i.displayName),title:"Invite to Group",children:e.jsx(V,{size:14})}),e.jsx(g,{size:"sm",variant:"danger",style:{padding:"4px 8px",fontSize:"0.75rem",opacity:d?.8:1},onClick:()=>h(i.id,i.displayName),title:"Ban Manager",children:e.jsx(H,{size:14})}),!d&&e.jsx(g,{size:"sm",variant:"danger",style:{padding:"4px 8px",fontSize:"0.75rem"},onClick:()=>l(i.id,i.displayName),title:"Kick from Instance",children:e.jsx($,{size:14})})]})]}),Se=()=>{const{selectedGroup:i,isRoamingMode:n}=Y(),{currentWorldName:l,currentWorldId:h,instanceImageUrl:d,liveScanResults:o,updateLiveScan:b,setEntityStatus:w}=te(),[k]=p.useState(!0),c=o,[y,z]=p.useState(null),[R,E]=p.useState([]),[U,M]=p.useState(!1),[s,f]=p.useState(null),a=p.useCallback((t,r="info")=>{E(x=>[...x.slice(-49),{message:t,type:r,id:Date.now()+Math.random()}])},[]),S=(t,r)=>{f({id:t,displayName:r})},m=p.useCallback(async()=>{if(!(!i&&!n))try{const t=i?i.id:void 0,r=await window.electron.instance.scanSector(t);if(b(r),window.electron.instance.getInstanceInfo){const x=await window.electron.instance.getInstanceInfo();x.success&&z({name:x.name||l||"Unknown",imageUrl:x.imageUrl||d||void 0,worldId:x.worldId||h||void 0,instanceId:x.instanceId||void 0})}else z({name:l||"Unknown",imageUrl:d||void 0,worldId:h||void 0,instanceId:void 0})}catch(t){console.error(t)}},[i,n,l,h,d,b]);p.useEffect(()=>{if(!i&&!n)return;i?a(`[SYSTEM] Uplink established to ${i.name}.`,"success"):E(r=>{const x=r[r.length-1];return x&&x.message.includes("ROAMING MODE ENGAGED")?r:[...r.slice(-49),{message:"[SYSTEM] ROAMING MODE ENGAGED. Passive Monitoring Active.",type:"warn",id:Date.now()}]}),m();const t=setInterval(m,5e3);return()=>clearInterval(t)},[i,n,m,a]),p.useEffect(()=>window.electron.instance.onEntityUpdate(r=>{a(`[SCAN] Identify: ${r.displayName} (${r.rank})`,"info")}),[a]);const v=async(t,r)=>{if(i){a(`[CMD] Inviting ${r}...`,"info");try{await window.electron.instance.recruitUser(i.id,t),a(`[CMD] Invite sent to ${r}`,"success")}catch{a(`[CMD] Failed to invite ${r}`,"error")}}},L=async(t,r)=>{if(i&&confirm(`Are you sure you want to KICK (Vote/Ban) ${r}?`)){a(`[CMD] Kicking ${r}...`,"warn");try{await window.electron.instance.kickUser(i.id,t),a(`[CMD] Kicked ${r}`,"success"),w(t,"kicked")}catch{a(`[CMD] Failed to kick ${r}`,"error")}}},[u,I]=p.useState(null),[B,A]=p.useState(null),q=async()=>{if(!c.length)return;const t=c.filter(x=>!x.isGroupMember&&x.status==="active");if(t.length===0){a("[CMD] No strangers to recruit.","warn");return}a(`[CMD] SENDING MASS INVITES TO ${t.length} STRANGERS...`,"warn"),I({current:0,total:t.length}),A("recruit");let r=0;for(const x of t){const D=await window.electron.instance.recruitUser(i.id,x.id);!D.success&&D.error==="RATE_LIMIT"&&(a("[WARN] RATE LIMIT DETECTED! Cooling down for 10s...","warn"),await new Promise(C=>setTimeout(C,1e4))),r++,I({current:r,total:t.length}),await new Promise(C=>setTimeout(C,250))}a(`[CMD] Recruitment complete. Sent ${r} invites.`,"success"),I(null),A(null)},Z=async()=>{if(i){a("[CMD] Fetching rally targets...","info"),M(!0);try{const t=await window.electron.instance.getRallyTargets(i.id);if(M(!1),!t.success||!t.targets||t.targets.length===0){a("[CMD] No rally targets found (recent members).","warn");return}const r=t.targets;a(`[CMD] RALLYING ${r.length} GROUP MEMBERS...`,"warn"),I({current:0,total:r.length}),A("rally");let x=0;for(const D of r){const C=await window.electron.instance.inviteToCurrent(D.id);!C.success&&C.error==="RATE_LIMIT"&&(a("[WARN] RATE LIMIT DETECTED! Cooling down for 10s...","warn"),await new Promise(G=>setTimeout(G,1e4))),x++,I({current:x,total:r.length}),await new Promise(G=>setTimeout(G,250))}a(`[CMD] Rally complete. Sent ${x} invites.`,"success")}catch{a("[CMD] Rally error","error")}finally{M(!1),I(null),A(null)}}},X=()=>{if(u&&B==="recruit"){const t=Math.round(u.current/u.total*100);return e.jsxs(g,{disabled:!0,style:{flex:1,height:"60px",flexDirection:"column",gap:"4px",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${t}%`,background:"rgba(var(--primary-hue), 100%, 50%, 0.3)",transition:"width 0.2s linear"}}),e.jsxs("div",{style:{position:"relative",zIndex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"0.8rem",fontWeight:"bold"},children:[t,"%"]}),e.jsxs("span",{style:{fontSize:"0.65rem",opacity:.8},children:[u.current,"/",u.total," SENT"]})]})]})}return e.jsxs(g,{onClick:q,disabled:u!==null,style:{flex:1,height:"60px",flexDirection:"column",gap:"4px"},children:[e.jsx(V,{size:20}),e.jsx("span",{style:{fontSize:"0.75rem"},children:"INVITE INSTANCE TO GROUP"})]})},J=()=>{if(!i)return e.jsxs(g,{disabled:!0,variant:"secondary",style:{flex:1,height:"60px",flexDirection:"column",gap:"4px",opacity:.5},children:[e.jsx(_,{size:20}),e.jsx("span",{style:{fontSize:"0.75rem"},children:"GROUP OFF-LINE"})]});if(u&&B==="rally"){const t=Math.round(u.current/u.total*100);return e.jsxs(g,{disabled:!0,variant:"secondary",style:{flex:1,height:"60px",flexDirection:"column",gap:"4px",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${t}%`,background:"rgba(255, 255, 255, 0.2)",transition:"width 0.2s linear"}}),e.jsxs("div",{style:{position:"relative",zIndex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"0.8rem",fontWeight:"bold"},children:[t,"%"]}),e.jsxs("span",{style:{fontSize:"0.65rem",opacity:.8},children:[u.current,"/",u.total," SENT"]})]})]})}return e.jsxs(g,{onClick:Z,disabled:U||u!==null,variant:"secondary",style:{flex:1,height:"60px",flexDirection:"column",gap:"4px"},children:[e.jsx(_,{size:20}),e.jsx("span",{style:{fontSize:"0.75rem"},children:"INVITE GROUP HERE"})]})},Q=async()=>{if(confirm(`⚠️ DANGER ZONE ⚠️

Are you sure you want to CLOSE this instance?

This will kick ALL players (including you) and lock the instance. This cannot be undone.`)){a("[CMD] INITIATING INSTANCE LOCKDOWN...","warn");try{const t=await window.electron.instance.closeInstance();t.success?a("[CMD] Instance Closed Successfully.","success"):a(`[CMD] Failed to close instance: ${t.error}`,"error")}catch{a("[CMD] Lockdown failed. API Error.","error")}}};return e.jsxs("div",{style:{height:"100%",display:"flex",gap:"1rem",overflow:"hidden",paddingBottom:"20px"},children:[e.jsxs("div",{style:{flex:2,display:"flex",flexDirection:"column",gap:"1rem",minWidth:"500px"},children:[e.jsxs(N,{style:{flex:"0 0 auto",padding:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",overflow:"hidden",position:"relative"},children:[y?.imageUrl&&e.jsx("div",{style:{position:"absolute",inset:0,backgroundImage:`url(${y.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center",opacity:.2,filter:"blur(2px)",zIndex:0}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",position:"relative",zIndex:1},children:[e.jsxs("div",{style:{position:"relative"},children:[y?.imageUrl?e.jsx("img",{src:y.imageUrl,style:{width:"40px",height:"40px",borderRadius:"8px",border:"1px solid var(--color-primary)",objectFit:"cover"}}):e.jsx(ue,{className:"text-primary",size:24}),k&&e.jsx(T.div,{style:{position:"absolute",inset:-4,border:"2px solid var(--color-primary)",borderRadius:y?.imageUrl?"12px":"50%"},animate:{opacity:[0,1,0],scale:[1,1.2,1.4]},transition:{duration:2,repeat:1/0}})]}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.1rem",fontWeight:800},children:y?.name||"CURRENT INSTANCE"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-dim)",letterSpacing:"0.05em"},children:"LIVE SECTOR SCAN"})]})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",gap:"1rem",overflow:"hidden"},children:[e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs(N,{style:{flex:"0 0 auto",padding:"0.8rem 1rem",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"var(--color-success)",boxShadow:"0 0 8px var(--color-success)"}}),e.jsx("h3",{style:{margin:0,fontSize:"0.95rem",color:"white",fontWeight:700,letterSpacing:"0.05em"},children:"IN INSTANCE"}),e.jsx("div",{style:{marginLeft:"auto",fontSize:"0.75rem",color:"var(--color-text-dim)",fontWeight:600},children:c.filter(t=>t.status==="active"||t.status==="joining").length})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",paddingRight:"4px"},children:[e.jsx(O,{children:c.filter(t=>t.status==="active"||t.status==="joining").map(t=>e.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},children:e.jsx(F,{entity:t,onInvite:v,onKick:L,onBan:S,readOnly:n})},t.id))}),c.filter(t=>t.status==="active"||t.status==="joining").length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--color-text-dim)"},children:["No active entities.",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.8rem"},children:"(Instance is empty)"})]}),e.jsx("div",{style:{height:"20px"}})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs(N,{style:{flex:"0 0 auto",padding:"0.8rem 1rem",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"var(--color-text-dim)"}}),e.jsx("h3",{style:{margin:0,fontSize:"0.95rem",color:"var(--color-text-dim)",fontWeight:700},children:"RECENTLY LEFT"}),e.jsx("div",{style:{marginLeft:"auto",fontSize:"0.75rem",color:"var(--color-text-dim)",fontWeight:600},children:c.filter(t=>t.status==="left"||t.status==="kicked").length})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",paddingRight:"4px"},children:[e.jsx(O,{children:c.filter(t=>t.status==="left"||t.status==="kicked").length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"rgba(255,255,255,0.2)",fontSize:"0.8rem",fontStyle:"italic"},children:"History empty"}):c.filter(t=>t.status==="left"||t.status==="kicked").map(t=>e.jsx(T.div,{initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},children:e.jsx(F,{entity:t,onInvite:()=>{},onKick:()=>{},onBan:S,readOnly:!0})},t.id))}),e.jsx("div",{style:{height:"20px"}})]})]})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"1rem",minWidth:"280px"},children:[e.jsxs(N,{style:{padding:"1.5rem",display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"0.9rem",color:"var(--color-text-dim)",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"0.5rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(pe,{size:16}),n?"ROAMING CONTROLS":"INSTANCE ACTIONS"]}),n?e.jsx("div",{style:{padding:"1.5rem",textAlign:"center",opacity:.5,fontSize:"0.8rem",border:"1px dashed rgba(255,255,255,0.2)",borderRadius:"8px",background:"rgba(0,0,0,0.1)"},children:"Local Monitoring Active"}):e.jsxs("div",{style:{display:"grid",gap:"10px"},children:[e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[X(),J()]}),e.jsxs(g,{onClick:Q,variant:"danger",style:{width:"100%",height:"40px",fontSize:"0.8rem",opacity:.8},children:[e.jsx($,{size:16,style:{marginRight:"8px"}}),"CLOSE INSTANCE"]})]})]}),e.jsxs(N,{style:{flex:1,display:"flex",flexDirection:"column",background:"rgba(0,0,0,0.2)"},children:[e.jsxs("div",{style:{padding:"0.8rem 1rem",borderBottom:"1px solid rgba(255,255,255,0.05)",fontSize:"0.8rem",fontWeight:"bold",color:"var(--color-text-dim)",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(le,{size:14}),"SYSTEM FEED"]}),e.jsxs("div",{style:{flex:1,padding:"1rem",fontFamily:"monospace",fontSize:"0.8rem",color:"rgba(255,255,255,0.7)",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px"},children:[R.map(t=>e.jsx("div",{style:{color:t.type==="error"?"#fca5a5":t.type==="success"?"#86efac":t.type==="warn"?"#fde047":"inherit"},children:t.message},t.id)),e.jsx("div",{style:{marginTop:"auto",display:"flex",alignItems:"center",gap:"4px"},children:e.jsx("span",{style:{width:"6px",height:"12px",background:"var(--color-primary)",display:"block",animation:"blink 1s infinite"}})})]})]})]}),e.jsx(we,{isOpen:!!s,onClose:()=>f(null),user:s,initialGroupId:i?.id},s?s.id:"closed")]})};export{Se as LiveView};
